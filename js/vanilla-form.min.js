/*
 * Vanilla Form v. 1.2.0
 * Author: Michal Szepielak
 */
var VanillaForm=function(a){"use strict";function b(){var a="9320087105434084715";return a=a.split(""),a=a.reverse().join("")}function c(a){a.formFocused=!0}function d(a,b){b.classList.remove("error"),b.removeEventListener("focus",g[b.name],!1),delete g[b.name],g.length--,g.length<=0&&(g.length=0,a.setSubmitState("initial"))}function e(b){var c=b.getBoundingClientRect(),d=Math.round(c.top)-5,e=a.innerHeight;return 0>=d?void a.scrollBy(0,d):void(d>=e&&a.scrollBy(0,d-e+30))}var f=function(a){var b=this;return a?(b.dict={markedAsSpamError:"Your message was marked as spam and was not sent! Fix your message!",markedAsSpamServerError:"Your message was marked as SPAM and was not send.",sendSuccess:"We have received your inquiry. Stay tuned, weâ€™ll get back to you very soon.",sendError:"Mail server has experienced an error. Please try again.",httpRequestError:"[%s] There was a problem with receiving response from mailing server",timeoutError:"Your request was timeout. Please try again.",parseResponseError:"Response from mailing server was unclear. Please contact administrator."},b.responseTimeout=5e3,b.httpRequest=null,b.url=a.action||location.href,b.form=a,b.processing=!1,b.submitButton=a.querySelector('[type="submit"]'),b.submitButton?(b.notificationBox=a.querySelector(".notification-box"),b.notificationBox?(b.notificationBox.addEventListener("click",function(){this.classList.remove("show-error"),this.classList.remove("show-success")},!1),b.formFocused=!1,b.focusBound=null,b.init(),b):(console.warn("Couldn't bind to submit button"),null)):(console.warn("Couldn't bind to submit button"),null)):(console.warn("Couldn't bind to form element"),null)},g={length:0};return f.prototype.logError=function(a){this.notify(a,"error")},f.prototype.notify=function(a,b){var c=this.notificationBox;return c?(c.innerHTML=a,c.classList.add("show-"+(b||"error")),void e(c)):void console.warn("Notification box not found")},f.prototype.setSubmitState=function(a){var b=this,c=b.submitButton,d=c.getAttribute("data-"+a),e=c.className.replace(/state-[a-z]+/gi,"");b.processing="processing"===a,c.className=e+" state-"+a,c.value=d},f.prototype.validateForm=function(){var c,e,f,h=this,i=h.form,j=i.elements,k=!1,l=!1,m=/^([\w\-]+(?:\.[\w\-]+)*)@((?:[\w\-]+\.)*\w[\w\-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;for(e=j.length-1;e>=0;--e)f=j[e],k=!1,g[f.name]&&d(h,f),""===f.value&&f.required?k=!0:("checkbox"===f.type&&f.required&&!f.checked&&(k=!0),"email"!==f.type||""===f.value||m.test(f.value)||(k=!0)),k?(f.classList.add("error"),g[f.name]=d.bind(null,h,f),g.length++,f.addEventListener("focus",g[f.name],!1),l=!0):f.classList.remove("error"),l&&h.setSubmitState("error");if(!l){if(h.formFocused!==!0)return h.logError(h.dict.markedAsSpamError),!1;c=i.querySelector('[name="contact_secret"]'),c||(c=document.createElement("input"),c.type="hidden",c.name="contact_secret",i.appendChild(c)),c.value=b()}return setTimeout(function(){a.scrollBy(0,-1)},1),!l},f.prototype.resetForm=function(){var a,b,c=this,d=c.form,e=c.submitButton;for(b=d.length-1;b>=0;--b)a=d[b],a!==e&&(a.classList.remove("success"),a.value="");c.setSubmitState("initial")},f.prototype.successForm=function(){var a=this;a.setSubmitState("success"),a.notify(a.dict.sendSuccess,"success")},f.prototype.processResponse=function(a){var b,c=this,d=c.dict;try{b=JSON.parse(a)}catch(e){console.error(e),b={result:"ParseError"}}switch(b.result){case"OK":c.successForm(d.sendSuccess),setTimeout(c.resetForm.bind(c),4e3);break;case"NO_SPAM":c.logError(d.markedAsSpamServerError);break;case"SEND_ERROR":c.logError(d.sendError),c.setSubmitState("initial");break;case"ParseError":c.logError(d.parseResponseError)}},f.prototype.requestStateChange=function(){var a=this,b=a.httpRequest;4===b.readyState&&(200===b.status?a.processResponse(b.responseText):(a.setSubmitState("initial"),0!==b.status&&a.logError(a.dict.httpRequestError.replace("%s",b.status))))},f.prototype.init=function(){var b,d,e=this,f=e.form,g=e.submitButton,h=f.elements;if(f.addEventListener("submit",e.submitForm.bind(e),!0),a.XMLHttpRequest?e.httpRequest=new XMLHttpRequest:a.ActiveXObject("Microsoft.XMLHTTP")&&(e.httpRequest=new ActiveXObject("Microsoft.XMLHTTP")),e.focusBound=c.bind(null,e),!e.httpRequest)return console.error("Couldn't init XMLHttpRequest"),null;for(e.formFocused=!1,d=h.length-1;d>=0;--d)b=h[d],"submit"!==b.type&&b.addEventListener("focus",e.focusBound,!1);g.value!==g.getAttribute("data-initial")&&(g.setAttribute("data-initial",g.value),e.setSubmitState("initial"))},f.prototype.send=function(a){var b=this,c=b.httpRequest;c.open("POST",b.url,!0),c.timeout=b.responseTimeout,c.ontimeout=function(){b.logError(b.dict.timeoutError),b.setSubmitState("initial")},c.send(a),c.onreadystatechange=b.requestStateChange.bind(b)},f.prototype.submitForm=function(a){var b=this,c="";return a&&(a.preventDefault(),a.stopPropagation()),b.validateForm()&&(b.setSubmitState("processing"),c=new FormData(b.form),b.send(c)),!1},f}(window);